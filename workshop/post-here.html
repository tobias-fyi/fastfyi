<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Post Here | tobias.fyi</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Post Here" />
<meta name="author" content="Tobias Reaper" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Worked as a machine learning engineer on a remote, interdisciplinary team to build an app for recommending subreddits." />
<meta property="og:description" content="Worked as a machine learning engineer on a remote, interdisciplinary team to build an app for recommending subreddits." />
<link rel="canonical" href="https://tobias.fyi/workshop/post-here" />
<meta property="og:url" content="https://tobias.fyi/workshop/post-here" />
<meta property="og:site_name" content="tobias.fyi" />
<meta property="og:image" content="https://tobias.fyi/images/post-here-landing-crop.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-01-12T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"https://tobias.fyi/workshop/post-here","@type":"BlogPosting","headline":"Post Here","dateModified":"2020-01-12T00:00:00-06:00","datePublished":"2020-01-12T00:00:00-06:00","image":"https://tobias.fyi/images/post-here-landing-crop.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://tobias.fyi/workshop/post-here"},"author":{"@type":"Person","name":"Tobias Reaper"},"description":"Worked as a machine learning engineer on a remote, interdisciplinary team to build an app for recommending subreddits.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://tobias.fyi/feed.xml" title="tobias.fyi" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">tobias.fyi</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Post Here</h1><p class="page-description">Worked as a machine learning engineer on a remote, interdisciplinary team to build an app for recommending subreddits.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-01-12T00:00:00-06:00" itemprop="datePublished">
        Jan 12, 2020
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Tobias Reaper</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      28 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/tobias-fyi/fastfyi/tree/master/_notebooks/2020-01-12-post-here.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/tobias-fyi/fastfyi/master?filepath=_notebooks%2F2020-01-12-post-here.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/tobias-fyi/fastfyi/blob/master/_notebooks/2020-01-12-post-here.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Introduction">Introduction </a>
<ul>
<li class="toc-entry toc-h2"><a href="#The-Problem">The Problem </a></li>
<li class="toc-entry toc-h2"><a href="#The-Solution">The Solution </a></li>
<li class="toc-entry toc-h2"><a href="#My-Role">My Role </a></li>
<li class="toc-entry toc-h2"><a href="#Imports-and-Configuration">Imports and Configuration </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#The-Data">The Data </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Wrangling-and-Exploration">Wrangling and Exploration </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Nulls">Nulls </a></li>
<li class="toc-entry toc-h3"><a href="#Preprocessing">Preprocessing </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Modeling">Modeling </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Label-Encoding">Label Encoding </a></li>
<li class="toc-entry toc-h2"><a href="#Vectorization">Vectorization </a></li>
<li class="toc-entry toc-h2"><a href="#Feature-Selection">Feature Selection </a></li>
<li class="toc-entry toc-h2"><a href="#Model-validation">Model validation </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Baseline">Baseline </a></li>
<li class="toc-entry toc-h3"><a href="#Multinomial-Naive-Bayes">Multinomial Naive Bayes </a></li>
<li class="toc-entry toc-h3"><a href="#Evaluate-on-validation-set">Evaluate on validation set </a></li>
<li class="toc-entry toc-h3"><a href="#Evaluate-on-test-set">Evaluate on test set </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Recommendations">Recommendations </a></li>
<li class="toc-entry toc-h2"><a href="#Model-deployment">Model deployment </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Final-Thoughts">Final Thoughts </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Scope-Management,-Revisited">Scope Management, Revisited </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-01-12-post-here.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="Introduction">
<a class="anchor" href="#Introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction<a class="anchor-link" href="#Introduction"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Problem">
<a class="anchor" href="#The-Problem" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Problem<a class="anchor-link" href="#The-Problem"> </a>
</h2>
<p>Reddit is an expansive site. Anyone who has spent any significant amount of time on it knows what I mean. There is a subreddit for seemingly every topic anyone could ever want to discuss or even think about (and many that most do not want think about).</p>
<p>Reddit is a powerful site; a tool for connecting and sharing information with like- or unlike-minded individuals around the world. When used well, it can be a very useful resource.</p>
<p>On the other hand, the deluge of information that's constantly piling into the pages of can be overwhelming and lead to wasted time. As with any tool, it can be used for good or for not-so-good.</p>
<p>A common problem that Redditors experience, particularly those who are relatively new to the site, is where to post content. Given that there are subreddits for just about everything, with wildly varying degrees of specificity it can be quite overwhelming trying to find the best place for each post.</p>
<p>Just to illustrate the point, some subreddits get <em>weirdly</em> specific. I won't go into the <em>really</em> weird or NSFW, but here are some good examples of what I mean by specific:</p>
<ul>
<li><a href="https://www.reddit.com/r/Borderporn/">r/Borderporn</a></li>
<li><a href="https://www.reddit.com/r/BreadStapledToTrees/">r/BreadStapledtoTrees</a></li>
<li><a href="https://www.reddit.com/r/birdswitharms/">r/birdswitharms</a></li>
<li><a href="https://old.reddit.com/r/totallynotrobots">r/totallynotrobots</a></li>
</ul>
<p>...need I go on? (If you're curious and/or want to be entertained indefinitely, here is a <a href="https://www.reddit.com/r/AskReddit/comments/dd49gw/what_are_some_really_really_weird_subreddits/">thread</a> with these and much, much more.)</p>
<p>Most of the time when a post is deemed irrelevant to a particular subreddit, it will simply be removed by moderators or a bot. However, depending on the subreddit and how welcoming they are to newbies, sometimes it can lead to very unfriendly responses and/or bans.</p>
<p>So how does one go about deciding where to post or pose a question?</p>
<p>Post Here aims to take the guesswork out of this process.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/tobias-fyi/assetstash/master/visual/images/post_here/post-here-landing.png" alt="Post Here: Subreddit Suggester" title="[Post Here: Subreddit Suggester"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Solution">
<a class="anchor" href="#The-Solution" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Solution<a class="anchor-link" href="#The-Solution"> </a>
</h2>
<p>The goal with the Post Here app, as mentioned, is to provide a tool that makes it quick and easy to find the most appropriate subreddits for any given post. A user would simply provide the title and text of the their prospective post and the app would provide the user with a list of subreddit recommendations.</p>
<p>Recommendations are produced by a model attempts to predict which subreddit a given post would belong to. The model was built using Scikit-learn, and was trained on a large dataset of reddit posts. In order to serve the recommendations to the web app, an API was built using Flask and deployed to Heroku.</p>
<p>The live version of the app is linked below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p><a href="https://github.com/tobias-fyi/post_here_ds">Post Here:The Subreddit Suggester</a></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="My-Role">
<a class="anchor" href="#My-Role" aria-hidden="true"><span class="octicon octicon-link"></span></a>My Role<a class="anchor-link" href="#My-Role"> </a>
</h2>
<p>I worked on the Post Here app with a remote, interdisciplinary team of data scientists, machine learning engineers, and web developers. I was one of two machine learning engineers on the team, responsible for the entire process of building and training the machine learning models. The two data scientists on the team were primarily responsible for building and deploying the API.</p>
<p>The main challenge we ran into, which directed much of the iterative process, was scope management.</p>
<p>At this point in my machine learning journey, this was one of the larger datasets that I'd taken on. Uncompressed, the dataset we used was over 800mb of mostly natural language text. The dataset and the time constraint—we had less than four full days of work to finish the project—were the primary causes of the challenges we ended up facing.</p>
<p>With such a dataset, one important concept we had to keep in mind was the <a href="https://en.wikipedia.org/wiki/Curse_of_dimensionality">curse of dimensionality</a>, which is basically a title for the various problems and phenomena that occur when dealing with extremely highly dimensional datasets. When processed, a natural language dataset of this size would likely fall prey to this curse and may prove somewhat unwieldy without large amounts of processing power.</p>
<p>I ended up researching and applying various methods of addressing this problem in order to fit the processing/modeling pipeline on the free Heroku Dyno, with a memory limit of 500mb, while preserving adequate performance. Many of our deployments failed because the pipeline, when loaded into memory on the server, exceeded that limit.</p>
<p>One important tradeoff we had to wrangle with was how much, and in what ways we could limit the dataset—i.e. how many classes to try and predict, and how many observations per class to include when training. The original dataset contains data for 1,000 subreddits. It was not within the scope of a a four-day project to build a classification model of a caliber that could accurately classify 1,000 classes.</p>
<p>In the beginning, we did try to build a basic model trained on all 1,000 classes. But with the time and processing power I had, it proved to be untenable. In the end, we settled for a model that classified text into 305 subreddits with a test precision-at-k of .75, .88, and .92 for 'k' of 1, 3, and 5, respectively.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Configuration">
<a class="anchor" href="#Imports-and-Configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Imports and Configuration<a class="anchor-link" href="#Imports-and-Configuration"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">janitor</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">MultinomialNB</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_selection</span> <span class="kn">import</span> <span class="n">chi2</span><span class="p">,</span> <span class="n">SelectKBest</span>

<span class="c1"># === NLP Imports === #</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Configure pandas display settings</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_colwidth</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># Set random seed</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">92</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="The-Data">
<a class="anchor" href="#The-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Data<a class="anchor-link" href="#The-Data"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The dataset we ended up using to train the recommendation system is called the <a href="https://www.kaggle.com/mswarbrickjones/reddit-selfposts">Reddit Self-Post Classification Task dataset</a>, available on Kaggle thanks to Evolution AI. The full dataset clocks in at over 800mb, containing 1,013,000 rows: 1,000 posts each from 1,013 subreddits.</p>
<p>For more details on the dataset, including a nice interactive plot of all of the subreddits, refer to Evolution AI's <a href="https://evolution.ai//blog/page/5/an-imagenet-like-text-classification-task-based-on-reddit-posts/">blog post</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Wrangling-and-Exploration">
<a class="anchor" href="#Wrangling-and-Exploration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Wrangling and Exploration<a class="anchor-link" href="#Wrangling-and-Exploration"> </a>
</h2>
<p>First, I needed to reduce the size of the dataset. I defined a subset of 12 categories which I thought were most relevant to the task at hand, and used that list to do the initial pruning. Those 12 categories left me with 305 unique subreddits and 305,000 rows. The list I used was as follows:</p>
<ul>
<li>health</li>
<li>profession</li>
<li>electronics</li>
<li>hobby</li>
<li>writing/stories</li>
<li>advice/question</li>
<li>social_group</li>
<li>stem</li>
<li>parenting</li>
<li>books</li>
<li>finance/money</li>
<li>travel</li>
</ul>
<p>Next, I took a random sample of those 305,000 rows. The result was a dataset with 91,500 rows, now consisting of between 250 and 340 rows per subreddit. If I tried to use all of the features (tokens, or words) that resulted from this corpus, even in its reduced state, it would still result in a serialized vocabulary and/or model too large for our free Heroku Dyno. However, the features used in the final model can be chosen based on how useful they are for the classification.</p>
<p>According to the dataset preview on Kaggle, there are quite a large number of missing values in each of the features—12%, 25%, and 39% of the subreddit, title, and selftext columns, respectively. However, I did not find any sign of those null values in the dataset nor mention of them in the dataset's companion blog post or article. I chocked it up to an error in the Kaggle preview.</p>
<p>Finally, I went about doing some basic preprocessing to get the data ready for vectorization. As described in the description page on Kaggle, newline and tab characters were replaced with their HTML equivalents, <code>&lt;lb&gt;</code> and <code>&lt;tab&gt;</code>. I removed those and other HTML entities using a simple regular expression. I also concatenated <code>title</code> and <code>selftext</code> into a single text feature in order to process them together.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"assets/data/rspct.tsv"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rspct</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">rspct</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(1013000, 4)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>subreddit</th>
      <th>title</th>
      <th>selftext</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6d8knd</td>
      <td>talesfromtechsupport</td>
      <td>Remember your command line switches...</td>
      <td>Hi there,  &lt;lb&gt;The usual. Long time lerker, first time poster, be kind etc. Sorry if this isn't the right place...&lt;lb&gt;&lt;lb&gt;Alright. Here's the story. I'm an independent developer who produces my ow...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>58mbft</td>
      <td>teenmom</td>
      <td>So what was Matt "addicted" to?</td>
      <td>Did he ever say what his addiction was or is he still chugging beers while talking about how sober he is?&lt;lb&gt;&lt;lb&gt;Edited to add: As an addict myself, anyone I know whose been an addict doesn't drin...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8f73s7</td>
      <td>Harley</td>
      <td>No Club Colors</td>
      <td>Funny story. I went to college in Las Vegas. This was before I knew anything about motorcycling whatsoever. Me and some college buddies would always go out on the strip to the dance clubs. We alwa...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Nulls">
<a class="anchor" href="#Nulls" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nulls<a class="anchor-link" href="#Nulls"> </a>
</h3>
<p>Kaggle says that 12%, 25%, and 39% of the subreddit, title, and selftext columns are null, respectively. If that is indeed the case, they did not get read into the dataframe correctly. However, it could be an error on Kaggle's part, seeing as there is no mention of these anywhere else in the description or blog post or article, nor sign of them during my explorations.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>id           0
subreddit    0
title        0
selftext     0
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preprocessing">
<a class="anchor" href="#Preprocessing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preprocessing<a class="anchor-link" href="#Preprocessing"> </a>
</h3>
<p>To prune the list of subreddits, I'll load in the <code>subreddit_info.csv</code> file, join, then choose a certain number of categories (category_1) to filter on.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"assets/data/subreddit_info.csv"</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">"subreddit"</span><span class="p">,</span> <span class="s2">"category_1"</span><span class="p">,</span> <span class="s2">"category_2"</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">info</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(3394, 3)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subreddit</th>
      <th>category_1</th>
      <th>category_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>whatsthatbook</td>
      <td>advice/question</td>
      <td>book</td>
    </tr>
    <tr>
      <th>1</th>
      <td>CasualConversation</td>
      <td>advice/question</td>
      <td>broad</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Clairvoyantreadings</td>
      <td>advice/question</td>
      <td>broad</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DecidingToBeBetter</td>
      <td>advice/question</td>
      <td>broad</td>
    </tr>
    <tr>
      <th>4</th>
      <td>HelpMeFind</td>
      <td>advice/question</td>
      <td>broad</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">rspct</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">"subreddit"</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"id"</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rspct</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">rspct</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(1013000, 5)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subreddit</th>
      <th>title</th>
      <th>selftext</th>
      <th>category_1</th>
      <th>category_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>talesfromtechsupport</td>
      <td>Remember your command line switches...</td>
      <td>Hi there,  &lt;lb&gt;The usual. Long time lerker, first time poster, be kind etc. Sorry if this isn't the right place...&lt;lb&gt;&lt;lb&gt;Alright. Here's the story. I'm an independent developer who produces my ow...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
    <tr>
      <th>1</th>
      <td>talesfromtechsupport</td>
      <td>I work IT for a certain clothing company and they use iPod Touchs for scanning some items</td>
      <td>[ME]- Thank you fro calling Store support, this is David. How may I help you?&lt;lb&gt;&lt;lb&gt;[Store]- Yeah, my iPod is frozen&lt;lb&gt;&lt;lb&gt;[ME]- Okay, can I have you hold down the power and the home button at t...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
    <tr>
      <th>2</th>
      <td>talesfromtechsupport</td>
      <td>It... It says right there on the screen...?</td>
      <td>Hi guys!  &lt;lb&gt;&lt;lb&gt;&amp;amp;nbsp;&lt;lb&gt;&lt;lb&gt;LTL, FTP - all that jazz. Starting you off with a short one.&lt;lb&gt;&lt;lb&gt;&amp;amp;nbsp;&lt;lb&gt;&lt;lb&gt;I'm the senior supporter at a smaller tech company with clients all over t...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
    <tr>
      <th>3</th>
      <td>talesfromtechsupport</td>
      <td>The computers not working. FIX IT NOW!</td>
      <td>Hey there TFTS! This is my second time posting. I don't work for any tech support company, but I do have friends, family and teachers at school that have no idea how stuff works.&lt;lb&gt;&lt;lb&gt;This tale ...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
    <tr>
      <th>4</th>
      <td>talesfromtechsupport</td>
      <td>A Storm of Unreasonableness</td>
      <td>Usual LTL, FTP. I have shared this story on a different site, but after reading TFTS for sometime I figured it'd belong here as well. &lt;lb&gt;&lt;lb&gt;This is from when I worked at a 3rd party call center ...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>  <span class="c1"># That's a good sign</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>subreddit     0
title         0
selftext      0
category_1    0
category_2    0
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span><span class="p">[</span><span class="s2">"category_1"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>video_game               100000
tv_show                   68000
health                    58000
profession                56000
software                  52000
electronics               51000
music                     43000
sports                    40000
sex/relationships         31000
hobby                     30000
geo                       29000
crypto                    29000
company/website           28000
other                     27000
anime/manga               26000
drugs                     23000
writing/stories           22000
programming               21000
arts                      21000
autos                     20000
advice/question           18000
education                 17000
animals                   17000
politics/viewpoint        16000
social_group              16000
card_game                 15000
food/drink                15000
stem                      14000
hardware/tools            14000
parenting                 13000
religion/supernatural     13000
books                     12000
appearance                11000
finance/money             10000
board_game                 9000
meta                       9000
movies                     7000
rpg                        7000
travel                     5000
Name: category_1, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">keep_cats</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"health"</span><span class="p">,</span>
    <span class="s2">"profession"</span><span class="p">,</span>
    <span class="s2">"electronics"</span><span class="p">,</span>
    <span class="s2">"hobby"</span><span class="p">,</span>
    <span class="s2">"writing/stories"</span><span class="p">,</span>
    <span class="s2">"advice/question"</span><span class="p">,</span>
    <span class="s2">"social_group"</span><span class="p">,</span>
    <span class="s2">"stem"</span><span class="p">,</span>
    <span class="s2">"parenting"</span><span class="p">,</span>
    <span class="s2">"books"</span><span class="p">,</span>
    <span class="s2">"finance/money"</span><span class="p">,</span>
    <span class="s2">"travel"</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Prune dataset to above categories</span>
<span class="c1"># Overwriting to save memory</span>
<span class="n">rspct</span> <span class="o">=</span> <span class="n">rspct</span><span class="p">[</span><span class="n">rspct</span><span class="p">[</span><span class="s2">"category_1"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">keep_cats</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rspct</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Unique subreddits:"</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rspct</span><span class="p">[</span><span class="s2">"subreddit"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
<span class="n">rspct</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(305000, 5)
Unique subreddits: 305
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subreddit</th>
      <th>title</th>
      <th>selftext</th>
      <th>category_1</th>
      <th>category_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>talesfromtechsupport</td>
      <td>Remember your command line switches...</td>
      <td>Hi there,  &lt;lb&gt;The usual. Long time lerker, first time poster, be kind etc. Sorry if this isn't the right place...&lt;lb&gt;&lt;lb&gt;Alright. Here's the story. I'm an independent developer who produces my ow...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
    <tr>
      <th>1</th>
      <td>talesfromtechsupport</td>
      <td>I work IT for a certain clothing company and they use iPod Touchs for scanning some items</td>
      <td>[ME]- Thank you fro calling Store support, this is David. How may I help you?&lt;lb&gt;&lt;lb&gt;[Store]- Yeah, my iPod is frozen&lt;lb&gt;&lt;lb&gt;[ME]- Okay, can I have you hold down the power and the home button at t...</td>
      <td>writing/stories</td>
      <td>tech support</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span> <span class="o">=</span> <span class="n">rspct</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=.</span><span class="mi">3</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rspct</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">rspct</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(91500, 5)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subreddit</th>
      <th>title</th>
      <th>selftext</th>
      <th>category_1</th>
      <th>category_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>594781</th>
      <td>stepparents</td>
      <td>Ex Wants Toddler Son (2M) to Meet Her AP/SO - x-post from /r/divorce</td>
      <td>Quick background: My soon-to-be ex-wife (26F) and I (27M) have been separated for about 5 months now. She has been in a serious relationship her AP (23M) whom she met and cheated on me with 6 mont...</td>
      <td>parenting</td>
      <td>step parenting</td>
    </tr>
    <tr>
      <th>617757</th>
      <td>bigseo</td>
      <td>Do we raise our pricing?</td>
      <td>I took a management role at an agency. We're way, way under $500/mo for SEO pricing - and I'm embarrassed to say that we're hurting for business. Seems to me that it's a struggle to get clients to...</td>
      <td>profession</td>
      <td>seo</td>
    </tr>
    <tr>
      <th>642368</th>
      <td>chemistry</td>
      <td>Mac vs. PC?</td>
      <td>Hello, all! I am currently a senior in high school and in the fall I will be going to SUNY Geneseo, majoring in chemistry and minoring in mathematics. &lt;lb&gt;&lt;lb&gt;Geneseo requires it’s students to get...</td>
      <td>stem</td>
      <td>chemistry</td>
    </tr>
    <tr>
      <th>325221</th>
      <td>migraine</td>
      <td>Beer as an aural abortive?</td>
      <td>Hiya folks,&lt;lb&gt;&lt;lb&gt;I've been a migraine sufferer pretty much my whole life. For me intense auras, numbness, confusion, the inability to speak or see is BY FAR the worst aspect of the ordeal. When ...</td>
      <td>health</td>
      <td>migraine</td>
    </tr>
    <tr>
      <th>524939</th>
      <td>MouseReview</td>
      <td>Recommend office mouse</td>
      <td>I was hoping you folks could help me out. Here's my situation and requirements:&lt;lb&gt;&lt;lb&gt;* I don't play games at all&lt;lb&gt;* Budget $30.00 or less&lt;lb&gt;* Shape as close to old Microsoft Intellimouse Opti...</td>
      <td>electronics</td>
      <td>computer mouse</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Concatenate title and selftext</span>
<span class="n">rspct</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span> <span class="o">=</span> <span class="n">rspct</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">rspct</span><span class="p">[</span><span class="s2">"selftext"</span><span class="p">]</span>

<span class="c1"># Drop categories</span>
<span class="n">rspct</span> <span class="o">=</span> <span class="n">rspct</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"category_1"</span><span class="p">,</span> <span class="s2">"category_2"</span><span class="p">,</span> <span class="s2">"title"</span><span class="p">,</span> <span class="s2">"selftext"</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># NOTE: takes a couple minutes to run</span>
<span class="n">rspct</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span> <span class="o">=</span> <span class="n">rspct</span><span class="p">[</span><span class="s2">"text"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"(&lt;lb&gt;)*|(&lt;tab&gt;)*|(&amp;amp;)*|(nbsp;)*"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
<span class="n">rspct</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subreddit</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>594781</th>
      <td>stepparents</td>
      <td>Ex Wants Toddler Son (2M) to Meet Her AP/SO - x-post from /r/divorce Quick background: My soon-to-be ex-wife (26F) and I (27M) have been separated for about 5 months now. She has been in a serious...</td>
    </tr>
    <tr>
      <th>617757</th>
      <td>bigseo</td>
      <td>Do we raise our pricing? I took a management role at an agency. We're way, way under $500/mo for SEO pricing - and I'm embarrassed to say that we're hurting for business. Seems to me that it's a s...</td>
    </tr>
    <tr>
      <th>642368</th>
      <td>chemistry</td>
      <td>Mac vs. PC? Hello, all! I am currently a senior in high school and in the fall I will be going to SUNY Geneseo, majoring in chemistry and minoring in mathematics. Geneseo requires it’s students to...</td>
    </tr>
    <tr>
      <th>325221</th>
      <td>migraine</td>
      <td>Beer as an aural abortive? Hiya folks,I've been a migraine sufferer pretty much my whole life. For me intense auras, numbness, confusion, the inability to speak or see is BY FAR the worst aspect o...</td>
    </tr>
    <tr>
      <th>524939</th>
      <td>MouseReview</td>
      <td>Recommend office mouse I was hoping you folks could help me out. Here's my situation and requirements:* I don't play games at all* Budget $30.00 or less* Shape as close to old Microsoft Intellimou...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">subreddits</span> <span class="o">=</span> <span class="n">rspct</span><span class="p">[</span><span class="s2">"subreddit"</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subreddits</span><span class="p">))</span>
<span class="n">subreddits</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>305
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array(['stepparents', 'bigseo', 'chemistry', 'migraine', 'MouseReview',
       'Malazan', 'Standup', 'preppers', 'Invisalign', 'whatsthisplant',
       'CrohnsDisease', 'KingkillerChronicle', 'OccupationalTherapy',
       'churning', 'Libraries', 'acting', 'eczema', 'Allergies',
       'bigboobproblems', 'AskAnthropology', 'psychotherapy',
       'WayfarersPub', 'synthesizers', 'StopGaming', 'stopsmoking',
       'eroticauthors', 'amazonecho', 'TalesFromThePizzaGuy',
       'rheumatoid', 'homestead', 'VoiceActing', 'FinancialCareers',
       'Sleepparalysis', 'ProtectAndServe', 'short', 'Fibromyalgia',
       'teaching', 'PlasticSurgery', 'insomnia', 'PLC', 'rapecounseling',
       'peacecorps', 'paintball', 'autism', 'Nanny', 'Plumbing',
       'Epilepsy', 'asmr', 'fatpeoplestories', 'Magic'], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rspct</span><span class="p">[</span><span class="s2">"subreddit"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Dreams             340
Gifts              337
HFY                333
Cubers             333
cassetteculture    333
                  ... 
foreignservice     265
WritingPrompts     263
immigration        263
TryingForABaby     262
Physics            250
Name: subreddit, Length: 305, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="Modeling">
<a class="anchor" href="#Modeling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modeling<a class="anchor-link" href="#Modeling"> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Label-Encoding">
<a class="anchor" href="#Label-Encoding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Label Encoding<a class="anchor-link" href="#Label-Encoding"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># This process naively transforms each class of the target into a number</span>
<span class="n">le</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span> <span class="c1"># Instantiate a new encoder instance</span>
<span class="n">le</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>  <span class="c1"># Fit it on training label data</span>

<span class="c1"># Transform both using the trained instance</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">y_val</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">y_val</span><span class="p">)</span>
<span class="n">y_test</span>  <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">y_test</span><span class="p">)</span>

<span class="n">y_train</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([ 92, 140,  65,  90, 278,  65, 272, 212])</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Vectorization">
<a class="anchor" href="#Vectorization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Vectorization<a class="anchor-link" href="#Vectorization"> </a>
</h2>
<p>A vectorizer is used to extract numerical features (information) from a corpus of natural language text. I used a <a href="https://en.wikipedia.org/wiki/Bag-of-words_model">bag-of-words</a> method of vectorization, which for the most part, disregards grammar.</p>
<p>The output of this vectorizer is a document-term matrix, with the documents (observations, or rows) on one axes and the terms (words, bigrams) on the other. This matrix can be thought of as a sort of vocabulary, or text-number translator.</p>
<p>At first, the "vocabulary" derived from the corpus using the vectorizer was the largest object when serialized. Luckily, there are many options and parameters available to reduce its size, most of which are simply different methods for reducing the number of features (terms) it contains.</p>
<p>One option is to put a hard limit of 100,000 on the number of features in the vocabulary. This is a simple, naive limit on the generated features, and thus, the resulting vocabulary size.</p>
<p>I decided to remove stopwords before vectorization in hopes that this would reduce the size of the vector vocabulary. To my initial surprise, removing the stop words (using <a href="https://www.nltk.org/">NLTK</a>'s list) actually increased the size of the serialized vocab from 59mb to 76mb.</p>
<p>After some consideration, I found this to be a reasonable result. I figured that many of the stop words are short ("I", "me", "my", etc.), and their removal caused the average length of words (and therefore bigrams as well) in the vocab to increase. While this may not account for the entirety of the difference, this provides some intuition as to why there is a difference.</p>
<p>Although the vocab without stop words was larger, I ended up using it anyways because it provided an extra ~0.01 in the precision-at-k score of the final model.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lengths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">three_or_below</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">stop_words</span><span class="p">:</span>
    <span class="n">lengths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">three_or_below</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">))</span>
        
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"There are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">stop_words</span><span class="p">)</span><span class="si">}</span><span class="s2"> stop words in the list."</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">three_or_below</span><span class="p">)</span><span class="si">}</span><span class="s2"> are 4 chars long or shorter."</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Average length is: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 179 stop words in the list.
109 are 4 chars long or shorter.
Average length is: 4.229050279329609.
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tfidf</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span>
    <span class="n">max_features</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span>
    <span class="n">min_df</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">stop_words</span><span class="o">=</span><span class="n">stop_words</span><span class="p">,</span>  <span class="c1"># Use nltk's stop words</span>
<span class="p">)</span>

<span class="c1"># Fit the vectorizer on the feature column to create vocab (doc-term matrix)</span>
<span class="n">vocab</span> <span class="o">=</span> <span class="n">tfidf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

<span class="c1"># Get sparse document-term matrices</span>
<span class="n">X_train_sparse</span> <span class="o">=</span> <span class="n">vocab</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_val_sparse</span> <span class="o">=</span> <span class="n">vocab</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_val</span><span class="p">)</span>
<span class="n">X_test_sparse</span> <span class="o">=</span> <span class="n">vocab</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="n">X_train_sparse</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">X_val_sparse</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">X_test_sparse</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((65880, 63588), (7320, 63588), (18300, 63588))</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Feature-Selection">
<a class="anchor" href="#Feature-Selection" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feature Selection<a class="anchor-link" href="#Feature-Selection"> </a>
</h2>
<p>As mentioned previously, the size of the corpus means the dimensionality of the featureset after vectorization will be very high. I passed in 100,000 as the maximum number of features to the vectorizer, limiting the initial size of the vocab. However, the features would have to be reduced more before training the model, as it is generally not good practice to have a larger number of features (100,000) than observations (91,500).</p>
<p>To reduce it down from that 100,000, I used a process called select k best, which does exactly what it sounds like: selects a certain number of the best features. The key aspect of this process is how to measure the value of the features; how to find which ones are the "best". The scoring function I used in this case is called <a href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.chi2.html">ch2</a> (chi-squared).</p>
<p>This function calculates chi-squared statistics between each feature and the target, measuring the dependence, or correlation, between them. The intuition here is that features which are more correlated with the target are more likely to be useful to the model.</p>
<p>I played around with some different values for the maximum number of features to be selected. Ultimately, I was once again limited by the size of the free Heroku Dyno, and settled on 20,000. This allowed the deployment to go smoothly while retaining enough information for the model to have adequate performance.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">selector</span> <span class="o">=</span> <span class="n">SelectKBest</span><span class="p">(</span><span class="n">chi2</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">20000</span><span class="p">)</span>

<span class="n">selector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_sparse</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">X_train_select</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train_sparse</span><span class="p">)</span>
<span class="n">X_val_select</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_val_sparse</span><span class="p">)</span>
<span class="n">X_test_select</span>  <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test_sparse</span><span class="p">)</span>

<span class="n">X_train_select</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">X_val_select</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">X_test_select</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((65880, 20000), (7320, 20000), (18300, 20000))</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-validation">
<a class="anchor" href="#Model-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model validation<a class="anchor-link" href="#Model-validation"> </a>
</h2>
<p>In this case, the model has a target that it is attempting to predict—a supervised problem. Therefore, the performance can be measured on validation and test sets.</p>
<p>To test out the recommendations I copied some posts and put them through the prediction pipeline to see what kinds of subreddits were getting recommended. For the most part, the predictions were decent.</p>
<p>The cases where the recommendations were a little less than ideal happened when I pulled example posts from subreddits that were not in the training data. The model generally did a good job recommending similar subreddits.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Baseline">
<a class="anchor" href="#Baseline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Baseline<a class="anchor-link" href="#Baseline"> </a>
</h3>
<p>For the baseline model, I decided to go with a basic random forest. This choice was somewhat arbitrary, though I was curious to see how a random forest would do with such a high target cardinality (number of classes/categories).</p>
<p>The baseline precision-at-k metrics for the random forest on the validation set were .54, .63, and .65, for <code>k</code> of 1, 3, and 5, respectively.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">precision_at_k</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">y_true</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_true</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">y_pred</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">y_pred</span><span class="p">[:,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">][:,</span> <span class="p">:</span><span class="n">k</span><span class="p">]</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rfc</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_estimators</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">rfc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_select</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>RandomForestClassifier(max_depth=32, n_estimators=200, n_jobs=-1)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y_pred_proba_rfc</span> <span class="o">=</span> <span class="n">rfc</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_val_select</span><span class="p">)</span>

<span class="c1"># For each prediction, find the index with the highest probability</span>
<span class="n">y_pred_rfc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">y_pred_proba_rfc</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_pred_rfc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([296, 139, 177,  78,  12, 177, 161, 216,  40,  31])</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"Validation scores:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@1 ="</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_val</span> <span class="o">==</span> <span class="n">y_pred_rfc</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@3 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_val</span><span class="p">,</span> <span class="n">y_pred_proba_rfc</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@5 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_val</span><span class="p">,</span> <span class="n">y_pred_proba_rfc</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Validation scores:
  precision@1 = 0.5368852459016393
  precision@3 = 0.6282786885245901
  precision@5 = 0.6502732240437158
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Multinomial-Naive-Bayes">
<a class="anchor" href="#Multinomial-Naive-Bayes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multinomial Naive Bayes<a class="anchor-link" href="#Multinomial-Naive-Bayes"> </a>
</h3>
<p>Multinomial naive Bayes is a probabilistic learning method for multinomially distributed data, and one of two classic naive Bayes algorithms used for text classification. I decided to iterate with this algorithm because it is meant for text classification tasks.</p>
<p>The precision-at-k metrics for the final Multinomial naive Bayes model on the validation set were .76, .88, and .9188, for <code>k</code> of 1, 3, and 5, respectively. Performance on the test set was nearly identical: .75, .88, and .9159.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nb</span> <span class="o">=</span> <span class="n">MultinomialNB</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">nb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_select</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>MultinomialNB(alpha=0.1)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Evaluate-on-validation-set">
<a class="anchor" href="#Evaluate-on-validation-set" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluate on validation set<a class="anchor-link" href="#Evaluate-on-validation-set"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y_pred_proba_val</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_val_select</span><span class="p">)</span>

<span class="c1"># For each prediction, find index with highest probability</span>
<span class="n">y_pred_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">y_pred_proba_val</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_pred_val</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([274, 139,  57,  78,  12,  17, 151, 216,  40, 171])</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"Validation scores:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@1 ="</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_val</span> <span class="o">==</span> <span class="n">y_pred_val</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@3 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_val</span><span class="p">,</span> <span class="n">y_pred_proba_val</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@5 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_val</span><span class="p">,</span> <span class="n">y_pred_proba_val</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Validation scores:
  precision@1 = 0.7599726775956284
  precision@3 = 0.8834699453551913
  precision@5 = 0.9188524590163935
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Evaluate-on-test-set">
<a class="anchor" href="#Evaluate-on-test-set" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluate on test set<a class="anchor-link" href="#Evaluate-on-test-set"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y_pred_proba_test</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test_select</span><span class="p">)</span>

<span class="c1"># For each prediction, find index with highest probability</span>
<span class="n">y_pred_test</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">y_pred_proba_test</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_pred_test</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([ 97, 199, 116, 249,  43, 203, 263, 275,  96,  27])</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"Test scores:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@1 ="</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_test</span> <span class="o">==</span> <span class="n">y_pred_test</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@3 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_proba_test</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"  precision@5 ="</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_proba_test</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Test scores:
  precision@1 = 0.7498360655737705
  precision@3 = 0.8834426229508197
  precision@5 = 0.9159562841530055
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Recommendations">
<a class="anchor" href="#Recommendations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recommendations<a class="anchor-link" href="#Recommendations"> </a>
</h2>
<p>The API should return a list of recommendations, not a single prediction. To accomplish this, I wrote a function that returns the top 5 most likely subreddits and their respective probabilities.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># The main functionality of the predict API endpoint</span>
<span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">submission_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">return_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
    <span class="sd">"""Serve subreddit predictions.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    title : string</span>
<span class="sd">        Title of post.</span>
<span class="sd">    submission_text : string</span>
<span class="sd">        Selftext that needs a home.</span>
<span class="sd">    return_count    : integer</span>
<span class="sd">        The desired number of recommendations.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Python dictionary formatted as follows:</span>
<span class="sd">        [{'subreddit': 'PLC', 'proba': 0.014454},</span>
<span class="sd">         ...</span>
<span class="sd">         {'subreddit': 'Rowing', 'proba': 0.005206}]</span>
<span class="sd">    """</span>
    <span class="c1"># Concatenate title and post text</span>
    <span class="n">fulltext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">submission_text</span><span class="p">)</span>
    <span class="c1"># Vectorize the post -&gt; sparse doc-term matrix</span>
    <span class="n">post_sparse</span> <span class="o">=</span> <span class="n">vocab</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">fulltext</span><span class="p">])</span>
    <span class="c1"># Feature selection</span>
    <span class="n">post_select</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">post_sparse</span><span class="p">)</span>
    <span class="c1"># Generate predicted probabilities from trained model</span>
    <span class="n">proba</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">post_select</span><span class="p">)</span>
    <span class="c1"># Wrangle into correct format</span>
    <span class="n">proba_dict</span> <span class="o">=</span> <span class="p">(</span><span class="n">pd</span>
                <span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">proba</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">le</span><span class="o">.</span><span class="n">classes_</span><span class="p">])</span>  <span class="c1"># Classes as column names</span>
                <span class="o">.</span><span class="n">T</span>  <span class="c1"># Transpose so column names become index</span>
                <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>  <span class="c1"># Pull out index into a column</span>
                <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"level_0"</span><span class="p">:</span> <span class="s2">"name"</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="s2">"proba"</span><span class="p">})</span>  <span class="c1"># Rename for aesthetics</span>
                <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">"proba"</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Sort by probability</span>
                <span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="n">return_count</span><span class="p">]</span>  <span class="c1"># n-top predictions to serve</span>
                <span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">"records"</span><span class="p">)</span>
               <span class="p">)</span>
    <span class="n">proba_json</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"predictions"</span><span class="p">:</span> <span class="n">proba_dict</span><span class="p">}</span>
    
    <span class="k">return</span> <span class="n">proba_json</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">title_science</span> <span class="o">=</span> <span class="s2">"""Is there an evolutionary benefit to eating spicy food that lead to consumption across numerous cultures throughout history? Or do humans just like the sensation?"""</span>

<span class="n">post_science</span> <span class="o">=</span> <span class="s2">"""I love spicy food and have done ever since I tried it. By spicy I mean HOT, like chilli peppers (we say spicy in England, I don't mean to state the obvious I'm just not sure if that's a global term and I've assumed too much before). I love a vast array of spicy foods from all around the world. I was just wondering if there was some evolutionary basis as to why spicy food managed to become some widely consumed historically. Though there seem to</span>

<span class="s2">It way well be that we just like a tingly mouth, the simple things in life."""</span>

<span class="n">science_recs</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">title_science</span><span class="p">,</span> <span class="n">post_science</span><span class="p">)</span>
<span class="n">science_recs</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'predictions': [{'name': 'GERD', 'proba': 0.009900622287634142},
  {'name': 'Allergies', 'proba': 0.009287774623361566},
  {'name': 'ibs', 'proba': 0.009150308633162811},
  {'name': 'AskAnthropology', 'proba': 0.009028660140513678},
  {'name': 'fatpeoplestories', 'proba': 0.00851982441049019}]}</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">title_pc</span> <span class="o">=</span> <span class="s2">"""Looking for help with a build"""</span>

<span class="n">post_pc</span> <span class="o">=</span> <span class="s2">"""I posted my wants for my build about 2 months ago. Ordered them and when I went to build it I was soooooo lost. It took 3 days to put things together because I was afraid I would break something when I finally got the parts together it wouldn’t start, I was so defeated. With virtually replacing everything yesterday it finally booted and I couldn’t be more excited!"""</span>

<span class="n">post_pc_recs</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">title_pc</span><span class="p">,</span> <span class="n">post_pc</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">post_pc_recs</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'predictions': [{'name': 'lego', 'proba': 0.008418484170536294},
  {'name': 'rccars', 'proba': 0.008112076951648648},
  {'name': 'MechanicalKeyboards', 'proba': 0.0078335440606017},
  {'name': 'fightsticks', 'proba': 0.007633958584830632},
  {'name': 'Luthier', 'proba': 0.00716176615193545},
  {'name': 'modeltrains', 'proba': 0.007088134228361153},
  {'name': 'cade', 'proba': 0.007058109839673285},
  {'name': 'vandwellers', 'proba': 0.006700262151491209},
  {'name': 'cosplay', 'proba': 0.006536648725434882},
  {'name': 'homestead', 'proba': 0.006166832450007183}]}</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">post_title</span> <span class="o">=</span> <span class="s2">"""What to do about java vs javascript"""</span>

<span class="n">post</span> <span class="o">=</span> <span class="s2">"""I am a new grad looking for a job and currently in the process with a company for a junior backend engineer role. I was under the impression that the position was Javascript but instead it is actually Java. My general programming and "leet code" skills are pretty good, but my understanding of Java is pretty shallow. How can I use the next three days to best improve my general Java knowledge? Most resources on the web seem to be targeting complete beginners. Maybe a book I can skim through in the next few days?</span>

<span class="s2">Edit:</span>

<span class="s2">A lot of people are saying "the company is a sinking ship don't even go to the interview". I just want to add that the position was always for a "junior backend engineer". This company uses multiple languages and the recruiter just told me the incorrect language for the specific team I'm interviewing for. I'm sure they're mainly interested in seeing my understanding of good backend principles and software design, it's not a senior lead Java position."""</span>

<span class="c1"># === Test out the function === #</span>
<span class="n">post_pred</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">post_title</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>  <span class="c1"># Default is 5 results</span>
<span class="n">post_pred</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'predictions': [{'name': 'cscareerquestions', 'proba': 0.516989539243874},
  {'name': 'devops', 'proba': 0.031462691062989795},
  {'name': 'interviews', 'proba': 0.02846504725703069},
  {'name': 'datascience', 'proba': 0.024227300545057697},
  {'name': 'bioinformatics', 'proba': 0.017516176338177075}]}</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">title_book</span> <span class="o">=</span> <span class="s2">"Looking for books with great plot twists"</span>

<span class="c1"># This one comes from r/suggestmeabook</span>
<span class="n">post2</span> <span class="o">=</span> <span class="s2">"""I've been dreaming about writing my own stort story for a while but I want to give it an unexpected ending. I've read lots of books, but none of them had the plot twist I want. I want to read books with the best plot twists, so that I can analyze what makes a good plot twist and write my own story based on that points. I don't like romance novels and I mostly enjoy sci-fi or historical books but anything beside romance novels would work for me, it doesn't have to be my type of novel. I'm open to experience after all. I need your help guys. Thanks in advance."""</span>

<span class="c1"># === This time with 10 results === #</span>
<span class="n">post2_pred</span> <span class="o">=</span> <span class="n">predict</span><span class="p">(</span><span class="n">title_book</span><span class="p">,</span> <span class="n">post2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">post2_pred</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{'predictions': [{'name': 'suggestmeabook', 'proba': 0.4070015062748489},
  {'name': 'writing', 'proba': 0.14985778378113648},
  {'name': 'eroticauthors', 'proba': 0.07159411817054702},
  {'name': 'whatsthatbook', 'proba': 0.06062653422250441},
  {'name': 'ComicBookCollabs', 'proba': 0.027277418056905547},
  {'name': 'Malazan', 'proba': 0.019514923212723943},
  {'name': 'TheDarkTower', 'proba': 0.017162701613834493},
  {'name': 'DestructiveReaders', 'proba': 0.0151031907793204},
  {'name': 'WoT', 'proba': 0.011165890302931272},
  {'name': 'readyplayerone', 'proba': 0.007566597361383115}]}</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-deployment">
<a class="anchor" href="#Model-deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model deployment<a class="anchor-link" href="#Model-deployment"> </a>
</h2>
<p>As mentioned, the model, vocab, and feature selector were all serialized using Python's pickle module. In the Flask app, the pickled objects are loaded and ready for use, just like that.</p>
<p>I will go over the details of how the Flask app was set up in a separate blog post.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="Final-Thoughts">
<a class="anchor" href="#Final-Thoughts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Final Thoughts<a class="anchor-link" href="#Final-Thoughts"> </a>
</h1>
<p>For me, the most important and valuable aspects of this project were mainly surrounding the challenge of scope management. I constantly had to ask myself, "What is the best version of this I can create given our limitations?"</p>
<p>At first, I thought it would be feasible to predict all of the 1,000+ subreddits in the data, and wasted hours of valuable time attempting to do so. While I had tested various strategies of reducing the complexity of the model, the performance was rather terrible when it was trained on 100 or less examples of each of the complete list of subreddits.</p>
<p>The data scientist who I primarily worked with (we had one data scientist in addition to him and one other machine learning engineer, both of whom did not contribute significantly to the project) kept telling me that I should try reducing the number of classes first, allowing for more examples of each class and fewer classes for the model to predict.</p>
<p>Ultimately, this is the strategy that worked best, and I wasted valuable time by not listening to him the first few times he recommended that strategy. Good teamwork requires the members being humble and listening, something that I have taken to heart since the conclusion of this project.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Scope-Management,-Revisited">
<a class="anchor" href="#Scope-Management,-Revisited" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scope Management, Revisited<a class="anchor-link" href="#Scope-Management,-Revisited"> </a>
</h2>
<p>As time was very short while building this initial recommendation API, there are many things that we wished we could have done but simply did not have the time. Here are a few of the more obvious improvements that could be made.</p>
<p>The first, and most obvious one, is to simply deploy to a more powerful server, such as one hosted on AWS Elastic Beanstalk or EC2. This way, we could use the entire dataset to train an optimal model without worrying (as much) about memory limits.</p>
<p>Second, I could use a Scikit-learn pipeline to validate and tune hyperparameters using cross-validation, instead of a separate validation set. Also, this pipeline could be serialized as a single large object, rather than as separate pieces (encoder, vectorizer, feature selector, and classifier). As a final note for this particular train of thought, <a href="https://joblib.readthedocs.io/en/latest/">Joblib</a> could potentially provide more efficient serialization than the Pickle module, allowing a more complex pipeline to be deployed on the same server.</p>
<p>Third, a model could've been trained to classify the input post first into a broad category. Then, some sort of model could be used to to classify into a specific subreddit within that broad category. I'm not sure about the feasibility of the second part of this idea, but thought it could be an interesting one to explore.</p>
<p>Lastly, different classes and calibers of models could have been tested for use in the various steps in the pipeline. In this case, I'm referring primarily to using deep learning/neural networks. For example, word vectors could be generated with word embedding models such as Word2Vec. Or the process could be recreated with a library like PyTorch, and a framework like <a href="https://github.com/facebookresearch/fastText/">FastText</a>.</p>
<p>I plan to explore at least some of these in separate blog posts.</p>
<p>As always, thank you for reading! I'll see you in the next one.</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="tobias-fyi/fastfyi"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/workshop/post-here" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Tobias Reaper</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/tobias-fyi" title="tobias-fyi"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/tobiasfyi" title="tobiasfyi"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
